<div class="container-dashboard">
  <div class="container-welcome-4cards">
    <div class="container-welcome">
      <h1>Welcome <strong><%= current_user.surname %>,</strong></h1>
      <p>Bienvenue sur ton dashboard, retrouve ici toutes les informations nécessaires à la gestion de ta propriété en vente ou de ta future propriété.</p>
    </div>

    <div class="grid-container-4cards">
      <div class="grid-item"><h1><%= current_user.properties.count %></h1>&#160;<p>propert<%= current_user.properties.count>1 ? "ies" : "y" %></p></div>
      <div class="grid-item"><h1><%= current_user.slots.count %></h1>&#160;<p>slot<%= current_user.slots.count>1 ? "s" : "" %></div>
      <div class="grid-item"><h1><%= current_user.chat_rooms.count %></h1>&#160;<p>message<%= current_user.chat_rooms.count>1 ? "s" : "" %></div>
      <div class="grid-item"><h1><%= current_user.bookings.count %></h1>&#160;<p>booking<%= current_user.bookings.count>1 ? "s" : "" %></div>
    </div>
  </div>
</div>

<div class="container-modal">
  <ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item">
      <a class="nav-link active" id="properties-tab" data-toggle="tab" href="#properties" role="tab" aria-controls="properties" aria-selected="true">Properties</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="slots-tab" data-toggle="tab" href="#slots" role="tab" aria-controls="slots" aria-selected="false">Slots</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="messages-sent-tab" data-toggle="tab" href="#messages-sent" role="tab" aria-controls="messages-sent" aria-selected="false">Property Messages</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="visits-tab" data-toggle="tab" href="#visits" role="tab" aria-controls="visits" aria-selected="false">Visits</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="messages-tab" data-toggle="tab" href="#messages" role="tab" aria-controls="messages" aria-selected="false">Seller Messages</a>
    </li>
  </ul>

  <!-- Tab panes -->
  <div class="tab-content">
    <div class="tab-pane active" id="properties" role="tabpanel" aria-labelledby="properties-tab">
      <div class="cards-dashboard-container">
        <% current_user.properties.each do |property| %>
          <div class="dashboard-card">
            <%= cl_image_tag(property.photos.first.key, class:"dashboard-card-photo")%>
            <div><i class="fas fa-map-marker">&#160;&#160;</i><%= property.address %></div>
            <div><i class="fas fa-coins">&#160;&#160;</i><%= number_with_delimiter(property.price, :delimiter => ',') %> MUR</div>
            <%= link_to 'Show', property, class: "search-button-info button-small"%>
          </div>
        <% end %>
      </div>
    </div>

    <div class="tab-pane" id="slots" role="tabpanel" aria-labelledby="slots-tab">
      <div class="cards-dashboard-container">
        <% current_user.slots.each do |slot| %>
          <div class="dashboard-card">
            <%= cl_image_tag(slot.property.photos.first.key, class:"dashboard-card-photo")%>
            <div><i class="fas fa-map-marker">&#160;&#160;</i><%=slot.property.address %></div>
            <div><%= slot.date %></div>
            <%= link_to 'Show', slot.property, class: "search-button-info button-small"%>
          </div>
        <% end %>w
      </div>
    </div>


    <div class="tab-pane" id="messages-sent" role="tabpanel" aria-labelledby="messages-tab-sent">
      <div class="cards-dashboard-container">
        <% @chat_rooms_properties.first.each do |chatroom| %>
          <div class="dashboard-card">
            <%= cl_image_tag(chatroom.messages.first.property.photos.first.key, class:"dashboard-card-photo")%>
            <%= chatroom.title %>

          </div>
        <% end %>
      </div>
    </div>

    <div class="tab-pane" id="messages" role="tabpanel" aria-labelledby="messages-tab">
      <div class="cards-dashboard-container">
        <% @chat_rooms_messages.each do |chatroom| %>
          <div class="dashboard-card">
            <%= cl_image_tag(chatroom.messages.first.property.photos.first.key, class:"dashboard-card-photo")%>
            <%= chatroom.title %>

          </div>
        <% end %>
      </div>
    </div>

    <div class="tab-pane" id="visits" role="tabpanel" aria-labelledby="visits-tab">

    </div>
  </div>
</div>
